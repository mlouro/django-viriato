{% extends 'invoice/base.html' %}
{% load i18n %}

{% block extra_head %}
    {{ block.super }}
    <link type="text/css" rel="Stylesheet" media="screen" href="{{ STATIC_URL }}css/invoices/contract.css"/>

    <script type="text/javascript" src="{{ STATIC_URL }}js/invoices/contract.js"></script>

    <link type='text/css' href='{{ STATIC_URL }}css/invoices/basic.css' rel='stylesheet' media='screen' />

    <script type="text/javascript" src="http://jqueryui.com/latest/ui/ui.datepicker.js"></script>

    <!--   For modal window   -->
    <script src='{{ STATIC_URL }}js/invoices/jquery.simplemodal.js' type='text/javascript'></script>
    <script src='{{ STATIC_URL }}js/invoices/jqModal.js' type='text/javascript'></script>
    <link type="text/css" rel="Stylesheet" media="screen" href="{{ STATIC_URL }}css/invoices/modal.css"/>



{% endblock extra_head %}

{% block breadcrumbs %}
    {{ block.super }} <span class="new active"> Â» {% trans 'New Contract' %}</span>
{% endblock %}

{% block content-data %}
    <input type="hidden" value={{ tax }} id="tax"/>
    <input type="hidden" value={{ retention }} id="retention"/>
{% block content_data_form %}
    <form name="myForm" id="myForm" method="POST" action="/invoice/contract/">
{% endblock content_data_form %}
        {{ formset.management_form }}

        <div id="document_header">
            <h3>{% trans 'Contract Information' %}</h3>
            <p id="approved">
                <label for="approved">{% trans 'Approved' %} </label>{{ contract_form.approved }}
            </p>
            <table>
                <tr>
                    <td><label for="description">{% trans 'Contract description' %} </label></td>
                    <td id="description">
                        {{ contract_form.description }}
                        <br/>
                        {{ contract_form.description.errors }}
                    </td>
                </tr>
                <tr>
                    <td><label for="date">{% trans 'Date' %} </label></td>
                    <td>
                        {{ contract_form.date }}
                        <br/>
                        {{ contract_form.date.errors }}
                    </td>
                </tr>
                <tr>
                    <td><label for="company">{% trans 'Company' %} </label></td>
                    <td>
                        {{ contract_form.company }}<a href=""><img title="{% trans 'Add New Company' %}" src="{{ STATIC_URL }}images/invoices/add.png"></a>
                        <br/>
                        {{ contract_form.company.errors }}
                    </td>
                </tr>

                {% if PROJECT %}
                    <tr>
                        <td><label for="project">{% trans 'Project' %} </label></td>
                        <td>
                            {{ contract_form.project }}<a href=""><img title="{% trans 'Add New Project' %}" src="{{ STATIC_URL }}images/invoices/add.png"></a>
                            <br/>
                            {{ contract_form.project.errors }}
                        </td>
                    </tr>
                {% endif %}
            </table>
        </div>

        <div id="document_details">
            <h3>{% trans 'Document Details' %}</h3>
            <table class="stripes" id="table_details">
                <tr>
                    <th class="headers">{% trans "Delete" %}</th>
                    <th class="headers">{% trans "Description" %}</th>
                    <th class="headers">{% trans "Unity cost" %}</th>
                    <th class="headers">{% trans "Quantity" %}</th>
                    <th id ="hide_1" class="taxes hide_1 headers">{% trans "Tax (%)" %}</th>
                    <th id="hide_1" class="taxes hide_1 headers">{% trans "Retention (%)" %}</th>
                </tr>

                {% for form in formset.forms %}
                    {{ form.id }}
                    <tr>
                        <td class="select headers">{{ form.DELETE }}</td>
                        <td class="description headers">{{ form.description }}<br/>{{ form.description.errors }}</td>
                        <td class="unity_cost headers">{{ form.unity_cost }}<br/>{{ form.unity_cost.errors }}</td>
                        <td class="quantity headers">{{ form.quantity }}<br/>{{ form.quantity.errors }}</td>
                        <td id="hide_1" class="taxes hide_1 headers">{{ form.tax }}<br/>{{ form.tax.errors }}</td>
                        <td id="hide_1" class="taxes hide_1 headers">{{ form.retention }}<br/>{{ form.retention.errors }}</td>
                        <td class="image"><img id="hide_button_1" width="28px" src="{{ STATIC_URL }}images/invoices/show.png"/></a></td>
                    </tr>
                {% endfor %}
            </table>
        </div>

        <div id="finals">
            <h3>{% trans 'Document Totals' %}</h3>
            <table>
                <tr>
                    <td><label for="total_impact_value">{% trans 'Impact Value' %} </label></td>
                    <td>
                        {{ contract_form.total_impact_value }}
                        <br/>
                        {{ contract_form.total_impact_value.errors }}
                    </td>
                </tr>
                <tr>
                    <td><label for="total_tax_value">{% trans 'Tax Value' %} </label></td>
                    <td>
                        {{ contract_form.total_tax_value }}
                        <br/>
                        {{ contract_form.total_tax_value.errors }}
                    </td>
                </tr>
                <tr>
                    <td><label for="total_retention_value">{% trans 'Retention Value' %} </label></td>
                    <td>
                        {{ contract_form.total_retention_value }}
                        <br/>
                        {{ contract_form.total_retention_value.errors }}
                    </td>
                </tr>
                <tr>
                    <td><label for="date">{% trans 'Total' %} </label><span class="input"></td>
                    <td>
                        {{ contract_form.total }}
                        <br/>
                        {{ contract_form.total.errors }}
                    </td>
                </tr>
            </table>
        </div>

        <div class="submit">
            <p>
                {% block content_data_submit %}
                    <a onclick="save();" class="navbutton">{% trans 'Create' %}</a>
                {% endblock content_data_submit %}
            </p>
        </div>
    </form>

    {% if PROJECT %}
        <div class="jqmWindow" id="dialog">
            <p id="close" ><input class="jqmdX jqmClose" type="image" src="{{ STATIC_URL }}images/invoices/closeFocus.png"/></p>

            <div id="content">
                <hr></hr>
                <h3>{% trans 'Milestones Import' %}: </h3>
                <p>{% trans 'Company' %}: <span id="companyAjax"></span></p>
                <p>{% trans 'Project' %}: <span id="projectAjax"></span></p>
            </div>
            <div id="milestones">
            </div>
            <div id="buttons">
                <p>
                    <a class="navbutton" id="import_button" onclick="import_milestones();">{% trans 'Import' %}</a>
                    <a class="navbutton jqmClose">{% trans 'Cancel' %}</a>
                </p>
            </div>
        </div>
    {% endif %}

{% endblock content-data %}

{% block content_action %}
    <p><a onclick="hello()" class="navbutton" >{% trans "Send Bills" %}</a></p>
    <p><a class="navbutton" href="">{% trans "Send Receipts" %}</a></p>
    {% if PROJECT %}
        <p><a id="importMilestones" class="navbutton">{% trans "Import Milestones" %}</a></p>
    {% endif %}
{% endblock content_action %}